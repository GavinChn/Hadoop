<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <title>热力图功能示例</title>
    <style type="text/css">
		html,body
        {
            height: 100%;
            margin: 0px;
        }
    </style>	
</head>
<body>
	<div id="container" style="width:90%;height:90%;"></div>
	
</body>
</html>

<script src="list.js"></script>

<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
<script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>

<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(114.334981,30.623223);
    map.centerAndZoom(point, 8);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
 // var points =[
 //  {"lng":115.046008,"lat":30.211828,"count":50},{"lng":110.798503,"lat":32.641853,"count":50},{"lng":112.123340,"lat":32.025076,"count":50},{"lng":109.485708,"lat":30.299363,"count":50},{"lng":111.289809,"lat":30.710767,"count":50},{"lng":112.203256,"lat":31.053672,"count":50},{"lng":112.235722,"lat":30.351577,"count":50},{"lng":112.901605,"lat":30.414485,"count":50},{"lng":113.461090,"lat":30.368932,"count":50},{"lng":113.172549,"lat":30.675426,"count":50},{"lng":113.380447,"lat":31.700519,"count":50},{"lng":113.955157,"lat":30.930216,"count":50},{"lng":114.872117,"lat":30.464029,"count":50},{"lng":114.894658,"lat":30.400758,"count":50},{"lng":114.323218,"lat":29.858400,"count":50},{"lng":110.680410,"lat":31.756040,"count":50},{"lng":114.312981,"lat":30.605888,"count":50},{"lng":114.315605,"lat":30.605643,"count":50},{"lng":114.277373,"lat":30.607757,"count":50},{"lng":114.221175,"lat":30.588484,"count":50},{"lng":114.225200,"lat":30.560376,"count":50},{"lng":114.322576,"lat":30.559630,"count":50},{"lng":114.391853,"lat":30.646229,"count":50},{"lng":114.349166,"lat":30.506936,"count":50},{"lng":114.142771,"lat":30.626466,"count":50},{"lng":114.089304,"lat":30.315640,"count":50},{"lng":114.036124,"lat":30.588298,"count":50},{"lng":114.328325,"lat":30.381338,"count":50},{"lng":114.382223,"lat":30.889194,"count":50},{"lng":114.807970,"lat":30.847510,"count":50},{"lng":114.305545,"lat":29.858414,"count":50},{"lng":114.489153,"lat":29.612841,"count":50},{"lng":113.823732,"lat":29.250882,"count":50},{"lng":113.945746,"lat":29.976473,"count":50},{"lng":114.046340,"lat":29.562855,"count":50},{"lng":113.906835,"lat":29.731043,"count":50},{"lng":114.898309,"lat":30.406262,"count":50},{"lng":114.691069,"lat":30.106234,"count":50},{"lng":114.735681,"lat":30.541761,"count":50},{"lng":114.885576,"lat":30.439547,"count":50},{"lng":115.015105,"lat":31.178667,"count":50},{"lng":115.567405,"lat":29.851047,"count":50},{"lng":114.878702,"lat":30.649582,"count":50},{"lng":115.272078,"lat":30.457627,"count":50},{"lng":115.405974,"lat":30.789911,"count":50},{"lng":115.687852,"lat":30.741530,"count":50},{"lng":115.442464,"lat":30.232506,"count":50},{"lng":115.950783,"lat":30.076344,"count":50},{"lng":114.624700,"lat":31.294665,"count":50},{"lng":116.009956,"lat":29.880880,"count":50},{"lng":113.916978,"lat":30.922881,"count":50},{"lng":113.845906,"lat":30.667283,"count":50},{"lng":113.579487,"lat":30.934181,"count":50},{"lng":113.695713,"lat":31.261377,"count":50},{"lng":113.760008,"lat":31.027474,"count":50},{"lng":114.004716,"lat":31.264494,"count":50},{"lng":114.133352,"lat":31.567649,"count":50},{"lng":113.378287,"lat":31.722544,"count":50},{"lng":113.306418,"lat":31.859961,"count":50},{"lng":113.832737,"lat":31.622536,"count":50},{"lng":112.704156,"lat":30.674254,"count":50},{"lng":112.847273,"lat":30.729332,"count":50},{"lng":112.888000,"lat":30.573509,"count":50},{"lng":112.997144,"lat":30.681028,"count":50},{"lng":112.951743,"lat":30.611863,"count":50},{"lng":113.017864,"lat":30.758502,"count":50},{"lng":113.097260,"lat":30.665173,"count":50},{"lng":113.047409,"lat":30.619984,"count":50},{"lng":113.093138,"lat":30.508427,"count":50},{"lng":113.092441,"lat":30.764404,"count":50},{"lng":113.226587,"lat":30.747338,"count":50},{"lng":113.355874,"lat":30.861927,"count":50},{"lng":113.396123,"lat":30.785972,"count":50},{"lng":113.337715,"lat":30.673444,"count":50},{"lng":113.407043,"lat":30.661360,"count":50},{"lng":113.392573,"lat":30.549607,"count":50},{"lng":113.373795,"lat":30.433009,"count":50},{"lng":113.341182,"lat":30.579021,"count":50},{"lng":113.231848,"lat":30.613077,"count":50},{"lng":113.194985,"lat":30.542784,"count":50},{"lng":113.274096,"lat":30.441466,"count":50},{"lng":113.194215,"lat":30.462521,"count":50},{"lng":113.150350,"lat":30.630992,"count":50},{"lng":113.489281,"lat":30.370636,"count":50},{"lng":113.431772,"lat":30.380569,"count":50},{"lng":113.466781,"lat":30.375237,"count":50},{"lng":113.458701,"lat":30.362448,"count":50},{"lng":113.041904,"lat":30.423690,"count":50},{"lng":113.091991,"lat":30.345380,"count":50},{"lng":113.208106,"lat":30.381132,"count":50},{"lng":113.314492,"lat":30.383435,"count":50},{"lng":113.571159,"lat":30.406440,"count":50},{"lng":113.684267,"lat":30.320298,"count":50},{"lng":113.512748,"lat":30.269599,"count":50},{"lng":113.681194,"lat":30.175212,"count":50},{"lng":113.515657,"lat":30.143257,"count":50},{"lng":113.386971,"lat":30.256408,"count":50},{"lng":113.300001,"lat":30.246529,"count":50},{"lng":113.237300,"lat":30.198776,"count":50},{"lng":113.158750,"lat":30.203860,"count":50},{"lng":113.094226,"lat":30.240942,"count":50},{"lng":113.489281,"lat":30.370636,"count":50},{"lng":113.421488,"lat":30.342424,"count":50},{"lng":112.787924,"lat":30.312294,"count":50},{"lng":112.913030,"lat":30.499687,"count":50},{"lng":112.719622,"lat":30.522398,"count":50},{"lng":112.863567,"lat":30.194337,"count":50},{"lng":112.780870,"lat":30.511021,"count":50},{"lng":112.915349,"lat":30.178738,"count":50},{"lng":112.723449,"lat":30.235275,"count":50},{"lng":112.656435,"lat":30.384687,"count":50},{"lng":112.603495,"lat":30.458187,"count":50},{"lng":112.603136,"lat":30.197836,"count":50},{"lng":112.196574,"lat":30.358981,"count":50},{"lng":112.261517,"lat":30.316777,"count":50},{"lng":112.431297,"lat":30.048329,"count":50},{"lng":111.763520,"lat":30.180708,"count":50},{"lng":112.235835,"lat":30.064435,"count":50},{"lng":112.432206,"lat":29.727592,"count":50},{"lng":112.911197,"lat":29.846015,"count":50},{"lng":113.482427,"lat":29.831474,"count":50},{"lng":112.594355,"lat":31.174615,"count":50},{"lng":112.207681,"lat":31.058136,"count":50},{"lng":112.214151,"lat":30.979717,"count":50},{"lng":112.190873,"lat":30.985355,"count":50},{"lng":112.890903,"lat":30.830347,"count":50},{"lng":113.126080,"lat":31.024922,"count":50},{"lng":112.595023,"lat":30.715948,"count":50},{"lng":112.215468,"lat":31.071258,"count":50},{"lng":111.646955,"lat":31.066775,"count":50},{"lng":110.753635,"lat":31.354149,"count":50},{"lng":110.983556,"lat":30.831907,"count":50},{"lng":111.213557,"lat":30.478945,"count":50},{"lng":110.683325,"lat":30.208744,"count":50},{"lng":111.333283,"lat":30.775690,"count":50},{"lng":111.292369,"lat":30.716572,"count":50},{"lng":111.367566,"lat":30.650871,"count":50},{"lng":111.274928,"lat":30.699121,"count":50},{"lng":111.441141,"lat":30.536462,"count":50},{"lng":109.485996,"lat":30.301109,"count":50},{"lng":108.942144,"lat":30.297313,"count":50},{"lng":109.727106,"lat":30.617632,"count":50},{"lng":110.347325,"lat":31.047994,"count":50},{"lng":109.496839,"lat":29.992848,"count":50},{"lng":109.146382,"lat":29.670888,"count":50},{"lng":109.413926,"lat":29.499477,"count":50},{"lng":110.042698,"lat":29.898039,"count":50},{"lng":112.141861,"lat":32.050422,"count":50},{"lng":112.218473,"lat":32.093818,"count":50},{"lng":112.778285,"lat":32.134914,"count":50},{"lng":111.847131,"lat":31.782022,"count":50},{"lng":111.268187,"lat":31.884900,"count":50},{"lng":111.659616,"lat":32.269185,"count":50},{"lng":118.766202,"lat":30.946824,"count":50},{"lng":111.682345,"lat":32.392714,"count":50},{"lng":110.820149,"lat":32.597802,"count":50},{"lng":110.775728,"lat":32.658218,"count":50},{"lng":110.878130,"lat":32.584586,"count":50},{"lng":111.022295,"lat":32.856588,"count":50},{"lng":110.432352,"lat":32.999250,"count":50},{"lng":110.235228,"lat":32.230504,"count":50},{"lng":109.721814,"lat":32.324522,"count":50},{"lng":110.747334,"lat":32.061891,"count":50},{"lng":111.519897,"lat":32.546227,"count":50},{"lng":115.072527,"lat":30.229239,"count":50},{"lng":114.966877,"lat":30.180061,"count":50},{"lng":114.898659,"lat":30.208940,"count":50},{"lng":114.986205,"lat":30.101806,"count":50},{"lng":115.222447,"lat":29.836879,"count":50},{"lng":115.036115,"lat":30.141639,"count":50},{"lng":110.668015,"lat":31.752910,"count":50},{"lng":110.826012,"lat":31.743084,"count":50},{"lng":110.489598,"lat":31.407380,"count":50},{"lng":110.435892,"lat":31.679002,"count":50},{"lng":110.900228,"lat":31.600485,"count":50},{"lng":110.610845,"lat":31.653913,"count":50},{"lng":110.037060,"lat":31.480076,"count":50},{"lng":110.251677,"lat":31.371609,"count":50}
//];
   
    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":10});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100});
	//是否显示热力图
    heatmapOverlay.show();	
	closeHeatmap();
    
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>